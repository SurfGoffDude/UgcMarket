# Исправление ошибки 413 Request Entity Too Large в Nginx

## Проблема
На продакшен-сервере при загрузке изображений для портфолио возникает ошибка `413 Request Entity Too Large`. Это происходит из-за того, что Nginx по умолчанию ограничивает размер загружаемых файлов до 1MB.

## Решение

### 1. Изменение конфигурации Nginx

Необходимо отредактировать файл конфигурации Nginx для вашего сайта. Обычно он находится в `/etc/nginx/sites-available/ugcmarket` или может быть включен в основной файл конфигурации `/etc/nginx/nginx.conf`.

```bash
sudo nano /etc/nginx/sites-available/ugcmarket
```

Добавьте следующие директивы в блок `server` или `http`:

```nginx
# Увеличение максимального размера загружаемых файлов
client_max_body_size 50M;
```

Если вы хотите установить это глобально для всех сайтов, можно добавить в блок `http` в файле `/etc/nginx/nginx.conf`:

```bash
sudo nano /etc/nginx/nginx.conf
```

```nginx
http {
    # Другие настройки...
    client_max_body_size 50M;
    # Другие настройки...
}
```

### 2. Проверка конфигурации и перезапуск Nginx

```bash
# Проверка конфигурации на ошибки
sudo nginx -t

# Если ошибок нет, перезапускаем Nginx
sudo systemctl restart nginx
```

### 3. Дополнительные настройки Django (опционально)

Также рекомендуется проверить настройки Django для загрузки файлов. В файле `settings.py` можно добавить:

```python
# Максимальный размер загружаемого файла (в байтах)
DATA_UPLOAD_MAX_MEMORY_SIZE = 52428800  # 50MB
FILE_UPLOAD_MAX_MEMORY_SIZE = 52428800  # 50MB
```

### 4. Проверка работоспособности

После внесения изменений попробуйте снова загрузить изображения для портфолио. Ошибка 413 должна исчезнуть.

## Примечание по безопасности

При увеличении максимального размера загружаемых файлов следует учитывать:

1. Риск DoS-атак через загрузку больших файлов
2. Увеличение нагрузки на сервер
3. Быстрое заполнение дискового пространства

Рекомендуется:
- Установить разумный лимит (например, 10-50MB в зависимости от требований)
- Настроить дополнительную валидацию файлов на стороне бэкенда
- Регулярно мониторить использование дискового пространства