# Процесс верификации аккаунтов в UGC Market

Верификация аккаунтов - важный процесс обеспечения доверия и безопасности на платформе UGC Market. Данный документ описывает полный процесс верификации как для креаторов, так и для клиентов.

## Общие принципы верификации

- Верификация является добровольной для клиентов, но обязательной для креаторов, желающих получить статус "Проверенный креатор"
- Процесс верификации защищен шифрованием и соответствует требованиям законодательства о защите персональных данных
- Все документы хранятся в зашифрованном виде и доступны только персоналу службы поддержки с соответствующими правами

## Уровни верификации

### 1. Базовая верификация (Уровень 1)
- Подтверждение email-адреса (через отправку кода подтверждения)
- Подтверждение номера телефона (через SMS)
- Согласие с условиями использования платформы

### 2. Стандартная верификация (Уровень 2)
- Базовая верификация
- Загрузка скана/фотографии удостоверения личности (паспорт, водительские права)
- Проверка на соответствие фотографии в документе с фотографией профиля
- Подтверждение адреса проживания (через загрузку счетов за коммунальные услуги или выписки из банка)

### 3. Расширенная верификация для креаторов (Уровень 3)
- Стандартная верификация
- Подтверждение профессиональной квалификации (дипломы, сертификаты, портфолио)
- Проверка на наличие отзывов и репутации в профессиональном сообществе
- Проверка авторских прав на представленные работы
- Проверка профилей в социальных сетях и других платформах

## Технический процесс верификации

### Этап 1: Инициирование верификации
1. Пользователь переходит в раздел "Верификация" в личном кабинете
2. Выбирает желаемый уровень верификации
3. Система отображает требования и список необходимых документов
4. Пользователь подтверждает своё согласие на обработку данных

### Этап 2: Загрузка документов
1. Пользователь загружает необходимые документы через защищенную форму
2. Система автоматически проверяет формат и качество изображений
3. Произволится автоматическая проверка на очевидные признаки подделки
4. Документы шифруются и сохраняются в защищенном хранилище

### Этап 3: Проверка документов
1. Сотрудник службы поддержки рассматривает заявку
2. Проверяется соответствие между предоставленными данными и информацией в профиле
3. При необходимости, проводится видеозвонок для подтверждения личности
4. Для креаторов: проверяется подлинность портфолио и профессиональных достижений

### Этап 4: Результат верификации
1. В случае успешной проверки статус верификации обновляется в профиле
2. Пользователь получает уведомление о результате проверки
3. В профиле появляется соответствующий значок подтвержденного аккаунта
4. Пользователь получает дополнительные возможности согласно уровню верификации

## Сроки верификации
- Базовая верификация: немедленно (автоматически)
- Стандартная верификация: 1-2 рабочих дня
- Расширенная верификация: 3-5 рабочих дней

## Обновление данных и переверификация
- Пользователи обязаны своевременно обновлять личные данные в случае их изменения
- Система может запрашивать переверификацию в следующих случаях:
  - Подозрение на взлом аккаунта
  - Истечение срока действия документов
  - Большое количество жалоб на пользователя
  - По запросу администрации платформы

## Отзыв верификации
Платформа оставляет за собой право отозвать верификацию в случае:
- Обнаружения поддельных документов
- Нарушения правил платформы
- Мошеннической активности
- Получения обоснованных жалоб от других пользователей

## Техническая реализация в системе

### База данных
```python
class VerificationRequest(models.Model):
    """Модель запроса на верификацию."""
    STATUS_CHOICES = [
        ('pending', 'На рассмотрении'),
        ('in_review', 'Проверяется'),
        ('approved', 'Одобрена'),
        ('rejected', 'Отклонена'),
    ]
    
    LEVEL_CHOICES = [
        (1, 'Базовая'),
        (2, 'Стандартная'),
        (3, 'Расширенная'),
    ]
    
    user = models.ForeignKey('accounts.User', on_delete=models.CASCADE, related_name='verification_requests')
    level = models.PositiveSmallIntegerField(choices=LEVEL_CHOICES)
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='pending')
    submitted_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    reviewed_by = models.ForeignKey(
        'accounts.User', 
        on_delete=models.SET_NULL, 
        null=True, 
        blank=True, 
        related_name='reviewed_verifications'
    )
    notes = models.TextField(blank=True)
    expires_at = models.DateTimeField(null=True, blank=True)

class VerificationDocument(models.Model):
    """Модель документа для верификации."""
    DOCUMENT_TYPE_CHOICES = [
        ('id', 'Удостоверение личности'),
        ('address', 'Подтверждение адреса'),
        ('qualification', 'Профессиональная квалификация'),
        ('portfolio', 'Портфолио'),
        ('other', 'Другое'),
    ]
    
    verification_request = models.ForeignKey(
        VerificationRequest, 
        on_delete=models.CASCADE, 
        related_name='documents'
    )
    document_type = models.CharField(max_length=20, choices=DOCUMENT_TYPE_CHOICES)
    file = models.FileField(upload_to='verification_documents/%Y/%m/%d/')
    uploaded_at = models.DateTimeField(auto_now_add=True)
    notes = models.TextField(blank=True)
    
    class Meta:
        # Предотвращаем возможность удаления файлов
        constraints = [
            models.UniqueConstraint(
                fields=['verification_request', 'document_type'],
                name='unique_document_type_per_request'
            )
        ]
```

### API для верификации
```python
# Основные эндпоинты API верификации:
- POST /api/verification/request/ - Создание запроса на верификацию
- GET /api/verification/status/ - Проверка статуса верификации
- POST /api/verification/documents/ - Загрузка документов
- DELETE /api/verification/cancel/ - Отмена запроса на верификацию
```

### Механизмы безопасности
1. Все загруженные документы шифруются на стороне сервера
2. Доступ к документам имеют только сотрудники с правами на проверку верификаций
3. Документы хранятся только необходимое для верификации время
4. Система ведет подробные журналы доступа к документам верификации
5. Для передачи документов используется только защищенное соединение (HTTPS)

## Интеграция с профилем пользователя
После успешной верификации пользователи получают:
- Значок верифицированного аккаунта в профиле
- Приоритет в выдаче поиска (для креаторов)
- Доступ к расширенному функционалу платформы
- Более высокие лимиты на суммы транзакций
- Возможность участия в эксклюзивных программах и предложениях платформы